{
  "timestamp": "2025-06-19T09:53:13.669Z",
  "successRate": "80",
  "totalTests": 20,
  "passedTests": 16,
  "failedTests": 4,
  "issues": [
    {
      "name": "tRPC healthcare.getAlertStats",
      "error": "Failed with status 500",
      "details": {}
    },
    {
      "name": "tRPC healthcare.createAlert",
      "error": "Failed with status 400: {\"error\":{\"message\":\"[\\n  {\\n    \\\"code\\\": \\\"invalid_type\\\",\\n    \\\"expected\\\": \\\"string\\\",\\n    \\\"received\\\": \\\"undefined\\\",\\n    \\\"path\\\": [\\n      \\\"roomNumber\\\"\\n    ],\\n    \\\"message\\\": \\\"Required\\\"\\n  },\\n  {\\n    \\\"expected\\\": \\\"'cardiac_arrest' | 'code_blue' | 'fire' | 'security' | 'medical_emergency'\\\",\\n    \\\"received\\\": \\\"undefined\\\",\\n    \\\"code\\\": \\\"invalid_type\\\",\\n    \\\"path\\\": [\\n      \\\"alertType\\\"\\n    ],\\n    \\\"message\\\": \\\"Required\\\"\\n  },\\n  {\\n    \\\"code\\\": \\\"invalid_type\\\",\\n    \\\"expected\\\": \\\"string\\\",\\n    \\\"received\\\": \\\"undefined\\\",\\n    \\\"path\\\": [\\n      \\\"hospitalId\\\"\\n    ],\\n    \\\"message\\\": \\\"Required\\\"\\n  },\\n  {\\n    \\\"code\\\": \\\"invalid_union\\\",\\n    \\\"unionErrors\\\": [\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 1,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 1\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 2,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 2\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 3,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 3\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 4,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 4\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 5,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 5\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      }\\n    ],\\n    \\\"path\\\": [\\n      \\\"urgencyLevel\\\"\\n    ],\\n    \\\"message\\\": \\\"Invalid input\\\"\\n  }\\n]\",\"code\":-32600,\"data\":{\"code\":\"BAD_REQUEST\",\"httpStatus\":400,\"stack\":\"TRPCError: [\\n  {\\n    \\\"code\\\": \\\"invalid_type\\\",\\n    \\\"expected\\\": \\\"string\\\",\\n    \\\"received\\\": \\\"undefined\\\",\\n    \\\"path\\\": [\\n      \\\"roomNumber\\\"\\n    ],\\n    \\\"message\\\": \\\"Required\\\"\\n  },\\n  {\\n    \\\"expected\\\": \\\"'cardiac_arrest' | 'code_blue' | 'fire' | 'security' | 'medical_emergency'\\\",\\n    \\\"received\\\": \\\"undefined\\\",\\n    \\\"code\\\": \\\"invalid_type\\\",\\n    \\\"path\\\": [\\n      \\\"alertType\\\"\\n    ],\\n    \\\"message\\\": \\\"Required\\\"\\n  },\\n  {\\n    \\\"code\\\": \\\"invalid_type\\\",\\n    \\\"expected\\\": \\\"string\\\",\\n    \\\"received\\\": \\\"undefined\\\",\\n    \\\"path\\\": [\\n      \\\"hospitalId\\\"\\n    ],\\n    \\\"message\\\": \\\"Required\\\"\\n  },\\n  {\\n    \\\"code\\\": \\\"invalid_union\\\",\\n    \\\"unionErrors\\\": [\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 1,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 1\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 2,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 2\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 3,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 3\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 4,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 4\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      },\\n      {\\n        \\\"issues\\\": [\\n          {\\n            \\\"code\\\": \\\"invalid_literal\\\",\\n            \\\"expected\\\": 5,\\n            \\\"path\\\": [\\n              \\\"urgencyLevel\\\"\\n            ],\\n            \\\"message\\\": \\\"Invalid literal value, expected 5\\\"\\n          }\\n        ],\\n        \\\"name\\\": \\\"ZodError\\\"\\n      }\\n    ],\\n    \\\"path\\\": [\\n      \\\"urgencyLevel\\\"\\n    ],\\n    \\\"message\\\": \\\"Invalid input\\\"\\n  }\\n]\\n    at inputValidatorMiddleware (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/middleware.mjs:46:19)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at callRecursive (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/procedureBuilder.mjs:146:24)\\n    at callRecursive (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/procedureBuilder.mjs:146:24)\\n    at callRecursive (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/procedureBuilder.mjs:146:24)\\n    at callRecursive (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/procedureBuilder.mjs:146:24)\\n    at callRecursive (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/procedureBuilder.mjs:146:24)\\n    at /Users/sirigiri/Documents/coding-projects/my-expo/src/server/trpc.ts:109:20\\n    at callRecursive (/Users/sirigiri/Documents/coding-projects/my-expo/node_modules/@trpc/server/dist/unstable-core-do-not-import/procedureBuilder.mjs:146:24)\\n    at /Users/sirigiri/Documents/coding-projects/my-expo/src/server/trpc.ts:87:20\",\"path\":\"healthcare.createAlert\"}}}",
      "details": {}
    },
    {
      "name": "tRPC patient.getPatientsList",
      "error": "Failed with status 400",
      "details": {}
    },
    {
      "name": "tRPC organization.listUserOrganizations",
      "error": "Failed with status 400",
      "details": {}
    }
  ],
  "fixes": [
    {
      "type": "backend",
      "file": "src/server/routers/healthcare.ts",
      "issue": "Healthcare endpoints require hospitalId",
      "fix": "Make hospitalId optional and use user's defaultHospitalId as fallback",
      "code": "\n// In healthcare procedures, add fallback for hospitalId\nconst hospitalId = input.hospitalId || ctx.user.defaultHospitalId;\nif (!hospitalId) {\n  throw new TRPCError({\n    code: 'BAD_REQUEST',\n    message: 'No hospital context. Please select a hospital first.'\n  });\n}\n        "
    }
  ]
}